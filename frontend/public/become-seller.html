<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Become a Seller | PropEdge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100">

  <div class="min-h-screen py-12 px-4">
    <div class="max-w-2xl mx-auto">
      
      <!-- Header -->
      <div class="text-center mb-10">
        <h1 class="text-4xl font-bold text-blue-900 mb-3">üè† Become a Seller</h1>
        <p class="text-gray-600 text-lg">List your property and reach thousands of potential buyers</p>
      </div>

      <!-- Form -->
      <div class="bg-white rounded-xl shadow-2xl p-8">
        
        <!-- Error Message -->
        <div id="errorMessage" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6 hidden">
          <span id="errorText"></span>
        </div>

        <!-- Success Message -->
        <div id="successMessage" class="bg-green-50 border border-green-200 text-green-700 px-6 py-4 rounded-lg mb-6 text-center hidden">
          <h3 class="font-bold text-lg mb-1">‚úÖ Request Submitted!</h3>
          <p>Thank you for registering as a seller. Our team will contact you shortly.</p>
        </div>

        <form id="sellerForm" onsubmit="handleSubmit(event)" class="space-y-6">
          
          <!-- Personal Information Section -->
          <div class="border-b border-gray-200 pb-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Personal Information</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Full Name *</label>
                <input
                  type="text"
                  name="name"
                  id="name"
                  placeholder="John Doe"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
                <span id="nameError" class="text-red-500 text-sm hidden"></span>
              </div>

              <div>
                <label class="block text-gray-700 font-semibold mb-2">Email Address *</label>
                <input
                  type="email"
                  name="email"
                  id="email"
                  placeholder="you@example.com"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
                <span id="emailError" class="text-red-500 text-sm hidden"></span>
              </div>

              <div>
                <label class="block text-gray-700 font-semibold mb-2">Phone Number *</label>
                <input
                  type="tel"
                  name="phone"
                  id="phone"
                  placeholder="9876543210"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
                <span id="phoneError" class="text-red-500 text-sm hidden"></span>
              </div>
            </div>
          </div>

          <!-- Property Information Section -->
          <div class="border-b border-gray-200 pb-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Property Information</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Property Type *</label>
                <select
                  name="propertyType"
                  id="propertyType"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                >
                  <option value="residential">Residential</option>
                  <option value="commercial">Commercial</option>
                  <option value="land">Land</option>
                  <option value="villa">Villa</option>
                  <option value="apartment">Apartment</option>
                </select>
              </div>

              <div>
                <label class="block text-gray-700 font-semibold mb-2">Expected Price (‚Çπ) *</label>
                <input
                  type="number"
                  name="expectedPrice"
                  id="expectedPrice"
                  placeholder="5000000"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  required
                />
                <span id="priceError" class="text-red-500 text-sm hidden"></span>
              </div>
            </div>

            <div class="mt-4">
              <label class="block text-gray-700 font-semibold mb-2">Property Address *</label>
              <input
                type="text"
                name="propertyAddress"
                id="propertyAddress"
                placeholder="123 Main Street, City, State 12345"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                required
              />
              <span id="addressError" class="text-red-500 text-sm hidden"></span>
            </div>

            <div class="mt-4">
              <label class="block text-gray-700 font-semibold mb-2">Property Description *</label>
              <textarea
                name="propertyDescription"
                id="propertyDescription"
                placeholder="Describe your property in detail (bedrooms, bathrooms, amenities, condition, etc.)"
                rows="5"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                required
              ></textarea>
              <span id="descError" class="text-red-500 text-sm hidden"></span>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="flex gap-4">
            <button
              type="submit"
              id="submitBtn"
              class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition duration-200"
            >
              Submit Seller Request
            </button>
            <button
              type="button"
              onclick="window.location.href='landing.html'"
              class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 rounded-lg transition duration-200"
            >
              Cancel
            </button>
          </div>

          <p class="text-gray-600 text-sm text-center">
            * Required fields. We'll verify your information before listing your property.
          </p>
        </form>
      </div>

      <!-- Info Box -->
      <div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
        <h3 class="font-bold text-blue-900 mb-3">üìã What happens next?</h3>
        <ul class="text-gray-700 space-y-2">
          <li>‚úÖ Our team reviews your property details</li>
          <li>‚úÖ We contact you to verify information and discuss listing options</li>
          <li>‚úÖ Your property is listed on PropEdge with professional photos and description</li>
          <li>‚úÖ Connect with potential buyers and negotiate deals</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    function validate() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const propertyAddress = document.getElementById('propertyAddress').value.trim();
      const propertyDescription = document.getElementById('propertyDescription').value.trim();
      const expectedPrice = document.getElementById('expectedPrice').value;

      let isValid = true;
      document.querySelectorAll('[id$="Error"]').forEach(el => el.classList.add('hidden'));

      if (!name) {
        document.getElementById('nameError').textContent = 'Full name is required';
        document.getElementById('nameError').classList.remove('hidden');
        isValid = false;
      }

      if (!email) {
        document.getElementById('emailError').textContent = 'Email is required';
        document.getElementById('emailError').classList.remove('hidden');
        isValid = false;
      } else if (!/^\S+@\S+\.\S+$/.test(email)) {
        document.getElementById('emailError').textContent = 'Invalid email format';
        document.getElementById('emailError').classList.remove('hidden');
        isValid = false;
      }

      if (!phone) {
        document.getElementById('phoneError').textContent = 'Phone number is required';
        document.getElementById('phoneError').classList.remove('hidden');
        isValid = false;
      } else if (!/^\d{10}$/.test(phone.replace(/\D/g, ''))) {
        document.getElementById('phoneError').textContent = 'Phone must be 10 digits';
        document.getElementById('phoneError').classList.remove('hidden');
        isValid = false;
      }

      if (!propertyAddress) {
        document.getElementById('addressError').textContent = 'Property address is required';
        document.getElementById('addressError').classList.remove('hidden');
        isValid = false;
      }

      if (!propertyDescription) {
        document.getElementById('descError').textContent = 'Property description is required';
        document.getElementById('descError').classList.remove('hidden');
        isValid = false;
      } else if (propertyDescription.length < 20) {
        document.getElementById('descError').textContent = 'Description must be at least 20 characters';
        document.getElementById('descError').classList.remove('hidden');
        isValid = false;
      }

      if (!expectedPrice) {
        document.getElementById('priceError').textContent = 'Expected price is required';
        document.getElementById('priceError').classList.remove('hidden');
        isValid = false;
      }

      return isValid;
    }

    async function handleSubmit(event) {
      event.preventDefault();

      if (!validate()) return;

      const form = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        propertyType: document.getElementById('propertyType').value,
        propertyAddress: document.getElementById('propertyAddress').value,
        propertyDescription: document.getElementById('propertyDescription').value,
        expectedPrice: document.getElementById('expectedPrice').value,
      };

      const submitBtn = document.getElementById('submitBtn');
      const errorDiv = document.getElementById('errorMessage');
      const errorText = document.getElementById('errorText');
      const successDiv = document.getElementById('successMessage');

      errorDiv.classList.add('hidden');
      successDiv.classList.add('hidden');

      submitBtn.disabled = true;
      submitBtn.textContent = 'Submitting...';

      try {
        const response = await fetch('/api/seller-request', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(form)
        });

        if (!response.ok) {
          throw new Error('Failed to submit seller request');
        }

        successDiv.classList.remove('hidden');
        document.getElementById('sellerForm').reset();
        
        setTimeout(() => {
          window.location.href = 'landing.html';
        }, 3000);

      } catch (error) {
        console.error('Error:', error);
        errorText.textContent = error.message || 'Failed to submit request. Please try again.';
        errorDiv.classList.remove('hidden');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Seller Request';
      }
    }
  </script>

</body>
</html>
